<div class="login-page" >
  <div class="form" style="background: rgb(236, 236, 236);">
    <h3 style="color: blue; font-weight:700; font-size: 20px;">Edit user</h3>
    <br>
    {{#each user}}
    <form class="register-form" method="POST" action="/admin/edit-user">
      <input type="hidden" name="id" value="{{this._id}}" />
      <input type="text" required id="name" name="name" value="{{this.name}}" placeholder="name"/>
      <input type="email" name="email" value="{{this.email}}" placeholder="email address"/>
      <button type="submit">Update</button>
    </form>
    {{/each}}
  </div>
</div>

<script>

  document.querySelector('.register-form').addEventListener('submit', function(event) {
  event.preventDefault(); // Prevent the form from submitting
  
  var name = document.getElementsByName('name')[0].value.trim();
  
  // Remove any existing error messages
  var errorMessages = this.querySelectorAll('.error-message');
  errorMessages.forEach(function(errorMessage) {
    errorMessage.remove();
  });
  
  var hasError = false; // Track if there are any errors
  
  if (name === '') {
    // Name field is empty, display an error message
    var nameErrorMessage = document.createElement('label');
    nameErrorMessage.className = 'error-message';
    nameErrorMessage.style.color = 'red';
    nameErrorMessage.textContent = 'Please enter a valid name';
    this.insertBefore(nameErrorMessage, this.querySelector('button'));
    hasError = true;
  }
    
  if (!hasError) {
    // No errors, proceed with form submission
    this.submit();
  }
});


</script>